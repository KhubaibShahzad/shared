{"ast":null,"code":"import _slicedToArray from \"/home/albatross/gitCode/shared/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _this = this,\n  _jsxFileName = \"/home/albatross/gitCode/shared/src/helpers/Recorder.js\";\nimport React from \"react\";\nimport Webcam from \"react-webcam\";\nimport { Row, Col, Button, Upload } from \"antd\";\nimport swal from 'sweetalert';\nexport var WebcamStreamCapture = function WebcamStreamCapture(props) {\n  var webcamRef = React.useRef(null);\n  var mediaRecorderRef = React.useRef(null);\n  var _React$useState = React.useState(false),\n    _React$useState2 = _slicedToArray(_React$useState, 2),\n    capturing = _React$useState2[0],\n    setCapturing = _React$useState2[1];\n  var _React$useState3 = React.useState([]),\n    _React$useState4 = _slicedToArray(_React$useState3, 2),\n    recordedChunks = _React$useState4[0],\n    setRecordedChunks = _React$useState4[1];\n  var _React$useState5 = React.useState(null),\n    _React$useState6 = _slicedToArray(_React$useState5, 2),\n    imgSrc = _React$useState6[0],\n    setImgSrc = _React$useState6[1];\n  var handleStartCaptureClick = React.useCallback(function () {\n    setCapturing(true);\n    mediaRecorderRef.current = new MediaRecorder(webcamRef.current.stream, {\n      mimeType: \"video/webm\"\n    });\n    mediaRecorderRef.current.addEventListener(\"dataavailable\", handleDataAvailable);\n    mediaRecorderRef.current.start();\n  }, [webcamRef, setCapturing, mediaRecorderRef]);\n  var handleDataAvailable = React.useCallback(function (_ref) {\n    var data = _ref.data;\n    if (data.size > 0) {\n      setRecordedChunks(function (prev) {\n        return prev.concat(data);\n      });\n    }\n  }, [setRecordedChunks]);\n  var handleStopCaptureClick = React.useCallback(function () {\n    mediaRecorderRef.current.stop();\n    setCapturing(false);\n  }, [mediaRecorderRef, webcamRef, setCapturing]);\n  var capture = React.useCallback(function () {\n    var imageSrc = webcamRef.current.getScreenshot();\n    setImgSrc(imageSrc);\n    var newTab = window.open();\n    newTab.document.body.innerHTML = \"<img src=\\\"\".concat(imageSrc, \"\\\" width=\\\"700px\\\" height=\\\"600px\\\">\");\n  }, [webcamRef, setImgSrc]);\n  var handleDownload = React.useCallback(function () {\n    if (recordedChunks.length) {\n      var blob = new Blob(recordedChunks, {\n        type: \"video/webm\"\n      });\n      var url = URL.createObjectURL(blob);\n      var a = document.createElement(\"a\");\n      document.body.appendChild(a);\n      a.style = \"display: none\";\n      a.href = url;\n      a.download = \"react-webcam-stream-capture.webm\";\n      a.click();\n      window.URL.revokeObjectURL(url);\n      setRecordedChunks([]);\n    }\n  }, [recordedChunks]);\n  return /*#__PURE__*/React.createElement(React.Fragment, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Webcam, {\n    mirrored: true,\n    audio: false,\n    ref: webcamRef,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(Row, {\n    gutter: 8,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 7\n    }\n  }, capturing ? /*#__PURE__*/React.createElement(Col, {\n    span: 6,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    type: \"primary\",\n    style: {\n      width: \"100%\"\n    },\n    onClick: handleStopCaptureClick,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 13\n    }\n  }, \"Stop Capture\")) : /*#__PURE__*/React.createElement(Col, {\n    span: 6,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    style: {\n      width: \"100%\"\n    },\n    onClick: handleStartCaptureClick,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 13\n    }\n  }, \"Start Capture\")), recordedChunks.length > 0 && /*#__PURE__*/React.createElement(Col, {\n    span: 6,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    style: {\n      width: \"100%\"\n    },\n    onClick: handleDownload,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 13\n    }\n  }, \"Download\")), /*#__PURE__*/React.createElement(Col, {\n    span: 6,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    style: {\n      width: \"100%\"\n    },\n    onClick: capture,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 11\n    }\n  }, \"SnapShot\")), /*#__PURE__*/React.createElement(Col, {\n    span: 6,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    type: \"danger\",\n    style: {\n      width: \"100%\"\n    },\n    onClick: props.onCancel,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 11\n    }\n  }, \"Cancel\")), /*#__PURE__*/React.createElement(Col, {\n    span: 6,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Upload, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    style: {\n      width: \"100%\"\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 13\n    }\n  }, \"Upload Video\"))), /*#__PURE__*/React.createElement(Col, {\n    span: 6,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    type: \"success\",\n    style: {\n      marginTop: \"1rem\",\n      width: \"100%\"\n    },\n    onClick: props.onCancel,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 11\n    }\n  }, \"Done\"))));\n};","map":{"version":3,"names":["React","Webcam","Row","Col","Button","Upload","swal","WebcamStreamCapture","props","webcamRef","useRef","mediaRecorderRef","useState","capturing","setCapturing","recordedChunks","setRecordedChunks","imgSrc","setImgSrc","handleStartCaptureClick","useCallback","current","MediaRecorder","stream","mimeType","addEventListener","handleDataAvailable","start","data","size","prev","concat","handleStopCaptureClick","stop","capture","imageSrc","getScreenshot","newTab","window","open","document","body","innerHTML","handleDownload","length","blob","Blob","type","url","URL","createObjectURL","a","createElement","appendChild","style","href","download","click","revokeObjectURL","width","onCancel","marginTop"],"sources":["/home/albatross/gitCode/shared/src/helpers/Recorder.js"],"sourcesContent":["import React from \"react\";\nimport Webcam from \"react-webcam\";\nimport { Row, Col, Button,Upload } from \"antd\";\nimport swal from 'sweetalert';\n\n\nexport const WebcamStreamCapture = (props) => {\n  const webcamRef = React.useRef(null);\n  const mediaRecorderRef = React.useRef(null);\n  const [capturing, setCapturing] = React.useState(false);\n  const [recordedChunks, setRecordedChunks] = React.useState([]);\n  const [imgSrc, setImgSrc] = React.useState(null);\n\n  const handleStartCaptureClick = React.useCallback(() => {\n    setCapturing(true);\n    mediaRecorderRef.current = new MediaRecorder(webcamRef.current.stream, {\n      mimeType: \"video/webm\",\n    });\n    mediaRecorderRef.current.addEventListener(\n      \"dataavailable\",\n      handleDataAvailable\n    );\n    mediaRecorderRef.current.start();\n  }, [webcamRef, setCapturing, mediaRecorderRef]);\n\n  const handleDataAvailable = React.useCallback(\n    ({ data }) => {\n      if (data.size > 0) {\n        setRecordedChunks((prev) => prev.concat(data));\n      }\n    },\n    [setRecordedChunks]\n  );\n\n  const handleStopCaptureClick = React.useCallback(() => {\n    mediaRecorderRef.current.stop();\n    setCapturing(false);\n  }, [mediaRecorderRef, webcamRef, setCapturing]);\n\n  const capture = React.useCallback(() => {\n    const imageSrc = webcamRef.current.getScreenshot();\n    setImgSrc(imageSrc);\n\n    var newTab = window.open();\n    newTab.document.body.innerHTML = `<img src=\"${imageSrc}\" width=\"700px\" height=\"600px\">`;\n  }, [webcamRef, setImgSrc]);\n\n  const handleDownload = React.useCallback(() => {\n    if (recordedChunks.length) {\n      const blob = new Blob(recordedChunks, {\n        type: \"video/webm\",\n      });\n      const url = URL.createObjectURL(blob);\n      const a = document.createElement(\"a\");\n      document.body.appendChild(a);\n      a.style = \"display: none\";\n      a.href = url;\n      a.download = \"react-webcam-stream-capture.webm\";\n      a.click();\n      window.URL.revokeObjectURL(url);\n      setRecordedChunks([]);\n    }\n  }, [recordedChunks]);\n\n\n\n  return (\n    <>\n      <Webcam mirrored={true} audio={false} ref={webcamRef} />\n      <Row gutter={8}>\n        {capturing ? (\n          <Col span={6}>\n            <Button\n              type=\"primary\"\n              style={{\n                width: \"100%\",\n              }}\n              onClick={handleStopCaptureClick}\n            >\n              Stop Capture\n            </Button>\n          </Col>\n        ) : (\n          <Col span={6}>\n            <Button\n              style={{\n                width: \"100%\",\n              }}\n              onClick={handleStartCaptureClick}\n            >\n              Start Capture\n            </Button>\n          </Col>\n        )}\n        {recordedChunks.length > 0 && (\n          <Col span={6}>\n            <Button\n              style={{\n                width: \"100%\",\n              }}\n              onClick={handleDownload}\n            >\n              Download\n            </Button>\n          </Col>\n        )}\n        <Col span={6}>\n          <Button\n            style={{\n              width: \"100%\",\n            }}\n            onClick={capture}\n          >\n            SnapShot\n          </Button>\n        </Col>\n       \n\n        <Col span={6}>\n          <Button\n            type=\"danger\"\n            style={{\n              width: \"100%\",\n            }}\n            onClick={props.onCancel}\n          >\n            Cancel\n          </Button>\n        </Col>\n\n        <Col span={6}>\n        <Upload >\n            <Button style={{\n              width: \"100%\",\n            }}\n            \n          >Upload Video</Button>\n          </Upload>\n        \n        </Col>\n\n\n\n        <Col span={6}>\n          <Button\n            type=\"success\"\n            style={{\n              marginTop:\"1rem\",\n              width: \"100%\",\n            }}\n            onClick={props.onCancel}\n          >\n            Done\n          </Button>\n        </Col>\n      </Row>\n    </>\n  );\n};\n"],"mappings":";;;AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,OAAOC,MAAM,MAAM,cAAc;AACjC,SAASC,GAAG,EAAEC,GAAG,EAAEC,MAAM,EAACC,MAAM,QAAQ,MAAM;AAC9C,OAAOC,IAAI,MAAM,YAAY;AAG7B,OAAO,IAAMC,mBAAmB,GAAG,SAAtBA,mBAAmB,CAAIC,KAAK,EAAK;EAC5C,IAAMC,SAAS,GAAGT,KAAK,CAACU,MAAM,CAAC,IAAI,CAAC;EACpC,IAAMC,gBAAgB,GAAGX,KAAK,CAACU,MAAM,CAAC,IAAI,CAAC;EAAC,sBACVV,KAAK,CAACY,QAAQ,CAAC,KAAK,CAAC;IAAA;IAAhDC,SAAS;IAAEC,YAAY;EAAA,uBACcd,KAAK,CAACY,QAAQ,CAAC,EAAE,CAAC;IAAA;IAAvDG,cAAc;IAAEC,iBAAiB;EAAA,uBACZhB,KAAK,CAACY,QAAQ,CAAC,IAAI,CAAC;IAAA;IAAzCK,MAAM;IAAEC,SAAS;EAExB,IAAMC,uBAAuB,GAAGnB,KAAK,CAACoB,WAAW,CAAC,YAAM;IACtDN,YAAY,CAAC,IAAI,CAAC;IAClBH,gBAAgB,CAACU,OAAO,GAAG,IAAIC,aAAa,CAACb,SAAS,CAACY,OAAO,CAACE,MAAM,EAAE;MACrEC,QAAQ,EAAE;IACZ,CAAC,CAAC;IACFb,gBAAgB,CAACU,OAAO,CAACI,gBAAgB,CACvC,eAAe,EACfC,mBAAmB,CACpB;IACDf,gBAAgB,CAACU,OAAO,CAACM,KAAK,EAAE;EAClC,CAAC,EAAE,CAAClB,SAAS,EAAEK,YAAY,EAAEH,gBAAgB,CAAC,CAAC;EAE/C,IAAMe,mBAAmB,GAAG1B,KAAK,CAACoB,WAAW,CAC3C,gBAAc;IAAA,IAAXQ,IAAI,QAAJA,IAAI;IACL,IAAIA,IAAI,CAACC,IAAI,GAAG,CAAC,EAAE;MACjBb,iBAAiB,CAAC,UAACc,IAAI;QAAA,OAAKA,IAAI,CAACC,MAAM,CAACH,IAAI,CAAC;MAAA,EAAC;IAChD;EACF,CAAC,EACD,CAACZ,iBAAiB,CAAC,CACpB;EAED,IAAMgB,sBAAsB,GAAGhC,KAAK,CAACoB,WAAW,CAAC,YAAM;IACrDT,gBAAgB,CAACU,OAAO,CAACY,IAAI,EAAE;IAC/BnB,YAAY,CAAC,KAAK,CAAC;EACrB,CAAC,EAAE,CAACH,gBAAgB,EAAEF,SAAS,EAAEK,YAAY,CAAC,CAAC;EAE/C,IAAMoB,OAAO,GAAGlC,KAAK,CAACoB,WAAW,CAAC,YAAM;IACtC,IAAMe,QAAQ,GAAG1B,SAAS,CAACY,OAAO,CAACe,aAAa,EAAE;IAClDlB,SAAS,CAACiB,QAAQ,CAAC;IAEnB,IAAIE,MAAM,GAAGC,MAAM,CAACC,IAAI,EAAE;IAC1BF,MAAM,CAACG,QAAQ,CAACC,IAAI,CAACC,SAAS,wBAAgBP,QAAQ,yCAAiC;EACzF,CAAC,EAAE,CAAC1B,SAAS,EAAES,SAAS,CAAC,CAAC;EAE1B,IAAMyB,cAAc,GAAG3C,KAAK,CAACoB,WAAW,CAAC,YAAM;IAC7C,IAAIL,cAAc,CAAC6B,MAAM,EAAE;MACzB,IAAMC,IAAI,GAAG,IAAIC,IAAI,CAAC/B,cAAc,EAAE;QACpCgC,IAAI,EAAE;MACR,CAAC,CAAC;MACF,IAAMC,GAAG,GAAGC,GAAG,CAACC,eAAe,CAACL,IAAI,CAAC;MACrC,IAAMM,CAAC,GAAGX,QAAQ,CAACY,aAAa,CAAC,GAAG,CAAC;MACrCZ,QAAQ,CAACC,IAAI,CAACY,WAAW,CAACF,CAAC,CAAC;MAC5BA,CAAC,CAACG,KAAK,GAAG,eAAe;MACzBH,CAAC,CAACI,IAAI,GAAGP,GAAG;MACZG,CAAC,CAACK,QAAQ,GAAG,kCAAkC;MAC/CL,CAAC,CAACM,KAAK,EAAE;MACTnB,MAAM,CAACW,GAAG,CAACS,eAAe,CAACV,GAAG,CAAC;MAC/BhC,iBAAiB,CAAC,EAAE,CAAC;IACvB;EACF,CAAC,EAAE,CAACD,cAAc,CAAC,CAAC;EAIpB,oBACE;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,gBACE,oBAAC,MAAM;IAAC,QAAQ,EAAE,IAAK;IAAC,KAAK,EAAE,KAAM;IAAC,GAAG,EAAEN,SAAU;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,EAAG,eACxD,oBAAC,GAAG;IAAC,MAAM,EAAE,CAAE;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,GACZI,SAAS,gBACR,oBAAC,GAAG;IAAC,IAAI,EAAE,CAAE;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,gBACX,oBAAC,MAAM;IACL,IAAI,EAAC,SAAS;IACd,KAAK,EAAE;MACL8C,KAAK,EAAE;IACT,CAAE;IACF,OAAO,EAAE3B,sBAAuB;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,GACjC,cAED,CAAS,CACL,gBAEN,oBAAC,GAAG;IAAC,IAAI,EAAE,CAAE;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,gBACX,oBAAC,MAAM;IACL,KAAK,EAAE;MACL2B,KAAK,EAAE;IACT,CAAE;IACF,OAAO,EAAExC,uBAAwB;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,GAClC,eAED,CAAS,CAEZ,EACAJ,cAAc,CAAC6B,MAAM,GAAG,CAAC,iBACxB,oBAAC,GAAG;IAAC,IAAI,EAAE,CAAE;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,gBACX,oBAAC,MAAM;IACL,KAAK,EAAE;MACLe,KAAK,EAAE;IACT,CAAE;IACF,OAAO,EAAEhB,cAAe;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,GACzB,UAED,CAAS,CAEZ,eACD,oBAAC,GAAG;IAAC,IAAI,EAAE,CAAE;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,gBACX,oBAAC,MAAM;IACL,KAAK,EAAE;MACLgB,KAAK,EAAE;IACT,CAAE;IACF,OAAO,EAAEzB,OAAQ;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,GAClB,UAED,CAAS,CACL,eAGN,oBAAC,GAAG;IAAC,IAAI,EAAE,CAAE;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,gBACX,oBAAC,MAAM;IACL,IAAI,EAAC,QAAQ;IACb,KAAK,EAAE;MACLyB,KAAK,EAAE;IACT,CAAE;IACF,OAAO,EAAEnD,KAAK,CAACoD,QAAS;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,GACzB,QAED,CAAS,CACL,eAEN,oBAAC,GAAG;IAAC,IAAI,EAAE,CAAE;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,gBACb,oBAAC,MAAM;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,gBACH,oBAAC,MAAM;IAAC,KAAK,EAAE;MACbD,KAAK,EAAE;IACT,CAAE;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,GAEH,cAAY,CAAS,CACb,CAEL,eAIN,oBAAC,GAAG;IAAC,IAAI,EAAE,CAAE;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,gBACX,oBAAC,MAAM;IACL,IAAI,EAAC,SAAS;IACd,KAAK,EAAE;MACLE,SAAS,EAAC,MAAM;MAChBF,KAAK,EAAE;IACT,CAAE;IACF,OAAO,EAAEnD,KAAK,CAACoD,QAAS;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,GACzB,MAED,CAAS,CACL,CACF,CACL;AAEP,CAAC"},"metadata":{},"sourceType":"module"}